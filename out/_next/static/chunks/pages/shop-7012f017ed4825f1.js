(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2804],{10555:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var i=s(37876),n=s(52460),a=s(46520),r=s(56882),l=s(89099),c=s(14232),o=s(8047),d=s(75569),u=s(22477),h=s(60593),x=s(57513);let p=e=>{var t,s;let{record:p,type:g="create"}=e,m=(0,l.useRouter)(),f=(0,o.F)(),j="create"===g?(0,d.Q)({abi:u.HV,address:u.$T,functionName:"ownerOf",args:[p.id]}):(0,d.Q)({abi:u.F1,address:u.NQ,functionName:"nftList",args:[u.$T,p.id]}),A=(0,d.Q)({abi:u.HV,address:u.$T,functionName:"name"}),[v,N]=(0,c.useState)(!1),w="create"===g?j.data:null==j||null==(t=j.data)?void 0:t[0];console.log(w,f.address,"xxxxx");let y="create"===g?null:null==j||null==(s=j.data)?void 0:s[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.A,{onClick:()=>{m.push("/details?id=".concat(p.id))},sx:{cursor:"pointer","& .MuiBox-root:hover":{"& img":{transform:"scale(1.12)"}}},children:[(0,i.jsx)(a.A,{sx:{width:"274px",height:"274px",overflow:"hidden","& img":{transition:"all 0.4s ease-in-out"}},children:(0,i.jsx)("img",{width:274,height:274,src:p.image,alt:""})}),(0,i.jsxs)(a.A,{sx:{padding:"30px 15px"},children:[(0,i.jsx)(x.H5,{children:p.name}),(0,i.jsx)(x.H5,{mt:1,children:A.data})]}),w&&w===f.address&&(0,i.jsx)(r.A,{onClick:e=>{e.stopPropagation(),N(!0)},children:"create"===g?"出售":"更新价格"})]}),(0,i.jsx)(h.A,{open:v,type:g,onClose:()=>N(!1),record:p,onSave:()=>N(!1),name:A.data,initAmount:y})]})}},21098:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var i=s(37876),n=s(16331),a=s(22090),r=s(14232),l=s(75569),c=s(10325),o=s(22477),d=s(22054),u=s(46520),h=s(65965),x=s(10555),p=s(31440);let g=new n.FR(d.mI),m="https://ipfs.io/ipfs/",f=()=>{let[e,t]=(0,r.useState)(!0),[s,n]=(0,r.useState)(""),d=(0,l.Q)({abi:o.HV,address:o.$T,functionName:"tokenURI",args:[0]});(0,r.useEffect)(()=>{if(d.data){let e=d.data,t=e.lastIndexOf("/0");n(e.slice(7,t))}},[d.data]);let f=async(e,t)=>await fetch("".concat(m).concat(e)).then(e=>e.json()).then(e=>({...e,id:t,image:"".concat(m).concat(e.image.slice(7))})),[j,A]=(0,r.useState)([]),v=(0,c.y)(),N=async()=>{var e;t(!0);let i=new a.NZ(o.NQ,o.F1,g),n=await i.queryFilter("List",8508829,v.data),r=await i.queryFilter("Revoke",8508829,v.data),l=null==(e=(await i.queryFilter("Buy",8508829,v.data)).concat(r))?void 0:e.map(e=>null==e?void 0:e.args[0]),c=l.length?n.filter(e=>!l.includes(null==e?void 0:e.args[0])):n,d=[];console.log(c,"__queryList",l,n);for(let e=0;e<c.length;e++){let t=Number(n[e].args[3]),i=await f(s+"/"+t,t);d.push(i)}A(d),t(!1)};return(0,r.useEffect)(()=>{s&&N()},[s]),console.log(j,"Number(_tokenURI)"),(0,i.jsx)(u.A,{mt:2,children:e?(0,i.jsx)(u.A,{sx:{margin:"150px 0",display:"flex",justifyContent:"center"},children:(0,i.jsx)(h.A,{size:40,color:"inherit"})}):(0,i.jsx)(p.A,{sx:{flexWrap:"wrap",justifyContent:"start",gap:2},children:j.map((e,t)=>(0,i.jsx)(x.A,{record:e,type:"update"},t))})})}},31440:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(37876),n=s(46520);let a=e=>{let{sx:t,children:s,onClick:a}=e;return(0,i.jsx)(n.A,{display:"flex",sx:t,onClick:()=>null==a?void 0:a(),children:s})}},57513:(e,t,s)=>{"use strict";s.d(t,{H3:()=>c,H5:()=>o,lX:()=>d});var i=s(37876),n=s(31599),a=s(46520),r=s(69241);let l=(0,n.Ay)(a.A)(e=>{let{ellipsis:t}=e;return{...t&&{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}),c=e=>{let{ellipsis:t,children:s,className:n,...a}=e;return(0,i.jsx)(l,{fontSize:18,component:"h3",fontWeight:700,ellipsis:+!!t,className:(0,r.A)({[n||""]:!0}),...a,children:s})},o=e=>{let{ellipsis:t,children:s,className:n,...a}=e;return(0,i.jsx)(l,{fontSize:15,component:"h5",lineHeight:1,fontWeight:500,ellipsis:+!!t,className:(0,r.A)({[n||""]:!0}),...a,children:s})},d=e=>{let{ellipsis:t,children:s,className:n,...a}=e;return(0,i.jsx)(l,{component:"p",fontSize:14,fontWeight:500,lineHeight:1.5,color:"text.secondary",ellipsis:+!!t,className:(0,r.A)({[n||""]:!0}),...a,children:s})}},60593:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var i=s(37876),n=s(65657),a=s(97444),r=s(34293),l=s(46520),c=s(70741),o=s(46229),d=s(72528),u=s(56882),h=s(53341),x=s(14232),p=s(17165),g=s(22477),m=s(15843),f=s(31440),j=s(57513);let A=e=>{let{open:t,record:s,name:A,onClose:v,initAmount:N,onSave:w,type:y="create"}=e,{writeContract:H}=(0,p.x)(),[b,_]=(0,x.useState)(!1),[k,E]=(0,x.useState)("");(0,x.useEffect)(()=>{N&&E(h.ck(N+""))},[N]),(0,x.useEffect)(()=>{},[t]);let S=()=>{0>Number(k)||(_(!0),H({abi:g.F1,address:g.NQ,functionName:"updatePrice",args:[g.$T,s.id,h.g5(k)]},{onSuccess:()=>{_(!1),w(h.g5(k))},onError:()=>{_(!1)}}))},C=()=>{0>Number(k)||(_(!0),H({abi:g.HV,address:g.$T,functionName:"approve",args:[g.NQ,s.id]},{onSuccess:()=>{H({abi:g.F1,address:g.NQ,functionName:"create",args:[g.$T,s.id,h.g5(k)]},{onSuccess:()=>{_(!1),w(h.g5(k))},onError:()=>{_(!1)}})},onError:()=>{_(!1)}}))};return(0,i.jsxs)(n.A,{open:t,onClose:v,sx:{"& .MuiDialog-paper":{width:"800px"}},children:[(0,i.jsx)(a.A,{id:"alert-dialog-title",children:"Quick list"}),(0,i.jsxs)(r.A,{sx:{maxHeight:"calc(100vh - 180px)"},children:[(0,i.jsxs)(m.A,{sx:{gap:2,mb:2},children:[(0,i.jsxs)(f.A,{sx:{alignItems:"center",gap:2},children:[(0,i.jsx)("img",{width:72,height:72,src:s.image,alt:""}),(0,i.jsxs)(l.A,{children:[(0,i.jsx)(j.H5,{children:s.name}),(0,i.jsx)(j.H5,{mt:1,children:A})]})]}),(0,i.jsxs)(l.A,{children:[(0,i.jsx)(j.H5,{sx:{textAlign:"right"},children:"Listing price"}),(0,i.jsxs)(j.H5,{mt:1,children:[k||"--"," ETH"]})]})]}),(0,i.jsx)(c.A,{fullWidth:!0,value:k,type:"number",onChange:e=>E(e.target.value),slotProps:{input:{endAdornment:(0,i.jsx)(o.A,{position:"end",children:"ETH"})}}})]}),(0,i.jsxs)(d.A,{children:[(0,i.jsx)(u.A,{variant:"outlined",onClick:v,children:"取消"}),(0,i.jsx)(u.A,{onClick:()=>{var e,t;null==(e=(t={create:C,update:S})[y])||e.call(t)},loading:b,variant:"contained",children:{create:"确定",update:"更新"}[y]||"确定"})]})]})}},62652:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop",function(){return s(21098)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[4945,1390,6447,636,6593,8792],()=>t(62652)),_N_E=e.O()}]);