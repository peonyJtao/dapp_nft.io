(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8914],{613:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>E});var s=t(37876),i=t(702),a=t(99652),l=t(84992),r=t(98436),d=t(56882),c=t(46520),o=t(65965),x=t(52460),u=t(89299),h=t(53341),j=t(89099),p=t(14232),g=t(17165),A=t(8047),m=t(75569),f=t(22477),v=t(67499),N=t(77994),w=t(15843),H=t(31440),S=t(57513);let b=e=>{let{children:n,icon:t,hasCollaps:i=!0,title:a,open:l}=e,[r,d]=(0,p.useState)(l||!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.A,{sx:{padding:"12px 15px",cursor:"pointer"},onClick:()=>i?d(!r):null,children:[(0,s.jsxs)(H.A,{sx:{alignItems:"center",gap:2},children:[t,(0,s.jsx)(S.H5,{children:a})]}),i&&(0,s.jsx)(v.A,{sx:{transform:r?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s ease"}})]}),(0,s.jsx)(u.A,{}),(0,s.jsx)(N.A,{in:r,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(c.A,{sx:{padding:"15px"},children:[n,(0,s.jsx)(u.A,{sx:{mt:2}})]})})]})};var k=t(60593);let C="https://ipfs.io/ipfs/",E=()=>{var e;let n=(0,j.useRouter)(),{writeContract:t}=(0,g.x)(),{query:{id:v}}=n,[N,E]=(0,p.useState)(!0),[T,_]=(0,p.useState)(),[y,Q]=(0,p.useState)(""),F=(0,A.F)(),X=(0,m.Q)({abi:f.HV,address:f.$T,functionName:"tokenURI",args:[v]}),$=(0,m.Q)({abi:f.HV,address:f.$T,functionName:"ownerOf",args:[v]}),I=(0,m.Q)({abi:f.F1,address:f.NQ,functionName:"nftList",args:[f.$T,v]}),O=async()=>{let e=X.data.lastIndexOf("/0"),n=X.data.slice(7,e);Q(n),_(await z(n+"/"+v,Number(v))),E(!1)};(0,p.useEffect)(()=>{X.data&&O()},[X.data]);let W=(0,m.Q)({abi:f.HV,address:f.$T,functionName:"name"}),z=async(e,n)=>await fetch("".concat(C).concat(e)).then(e=>e.json()).then(e=>({...e,id:n,image:"".concat(C).concat(e.image.slice(7))})),[P,V]=(0,p.useState)(!1),[R,L]=(0,p.useState)("create"),[M,U]=(0,p.useState)(!1),q=(0,p.useMemo)(()=>{var e,n;return(null==I||null==(e=I.data)?void 0:e[0])==="0x0000000000000000000000000000000000000000"?$.data:null==I||null==(n=I.data)?void 0:n[0]},[null==I?void 0:I.data,null==$?void 0:$.data,M]),[D,B]=(0,p.useState)(0);return(0,p.useEffect)(()=>{if(null==I?void 0:I.data){var e;B(null==I||null==(e=I.data)?void 0:e[1])}},[null==I?void 0:I.data]),(0,s.jsxs)(s.Fragment,{children:[N?(0,s.jsx)(c.A,{sx:{margin:"150px 0",display:"flex",justifyContent:"center"},children:(0,s.jsx)(o.A,{size:40,color:"inherit"})}):(0,s.jsxs)(H.A,{children:[(0,s.jsxs)(c.A,{sx:{width:"615px",height:"615px"},children:[(0,s.jsx)(x.A,{sx:{overflow:"hidden",width:"100%",aspectRatio:1,"& img":{width:"100%",height:"100%"}},children:(0,s.jsx)("img",{src:null==T?void 0:T.image,alt:""})}),(0,s.jsxs)(x.A,{sx:{mt:2},children:[(0,s.jsx)(b,{open:!0,title:"描述",icon:(0,s.jsx)(a.A,{}),children:(0,s.jsx)(S.lX,{children:null==T?void 0:T.description})}),(0,s.jsx)(b,{title:"特征",icon:(0,s.jsx)(l.A,{}),children:(0,s.jsx)(H.A,{sx:{flexWrap:"wrap",justifyContent:"start",gap:2,padding:"15px 4px"},children:null==T||null==(e=T.attributes)?void 0:e.map((e,n)=>{var t;return(0,s.jsxs)(x.A,{sx:{width:"30%",padding:"10px 8px",textAlign:"center"},children:[(0,s.jsx)(S.H5,{sx:{},children:null==(t=e.trait_type)?void 0:t.toUpperCase()}),(0,s.jsx)(S.lX,{mt:2,children:e.value})]},n)})})}),(0,s.jsx)(b,{title:"关于",icon:(0,s.jsx)(r.A,{}),children:(0,s.jsx)(S.lX,{children:"此系列尚无描述。"})})]})]}),(0,s.jsxs)(c.A,{sx:{p:2,flex:1},children:[(0,s.jsx)(S.H3,{mb:2,children:null==T?void 0:T.name}),(0,s.jsxs)(S.H5,{children:["拥有者: ",q]}),(0,s.jsxs)(c.A,{mt:5,children:[D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.A,{sx:{padding:"12px 15px"},children:[(0,s.jsx)(S.H5,{children:"价格"}),D&&(0,s.jsxs)(S.lX,{children:[h.ck(D)," ETH"]})]}),(0,s.jsx)(u.A,{})]}):null,(0,s.jsx)(c.A,{sx:{padding:"12px 15px"},children:(null==F?void 0:F.address)===q?$.data===q||M?(0,s.jsx)(d.A,{onClick:()=>{V(!0),L("create")},variant:"contained",startIcon:(0,s.jsx)(i.A,{}),children:"出售"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{variant:"contained",onClick:()=>{V(!0),L("update")},children:"更新价格"}),(0,s.jsx)(d.A,{sx:{ml:2},variant:"contained",onClick:()=>{t({abi:f.F1,address:f.NQ,functionName:"revoke",args:[f.$T,v]},{onSuccess:()=>{U(!0),B(0)}})},children:"取消"})]}):(0,s.jsx)(d.A,{onClick:()=>{V(!0)},variant:"contained",startIcon:(0,s.jsx)(i.A,{}),children:"购买"})}),(0,s.jsx)(b,{open:!0,title:"报价",icon:(0,s.jsx)(a.A,{}),children:(0,s.jsx)(S.lX,{children:null==T?void 0:T.description})})]})]})]}),T&&(0,s.jsx)(k.A,{open:P,type:R,onClose:()=>V(!1),record:T,onSave:e=>{V(!1),B(e)},name:W.data,initAmount:D})]})}},31440:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var s=t(37876),i=t(46520);let a=e=>{let{sx:n,children:t,onClick:a}=e;return(0,s.jsx)(i.A,{display:"flex",sx:n,onClick:()=>null==a?void 0:a(),children:t})}},57513:(e,n,t)=>{"use strict";t.d(n,{H3:()=>d,H5:()=>c,lX:()=>o});var s=t(37876),i=t(31599),a=t(46520),l=t(69241);let r=(0,i.Ay)(a.A)(e=>{let{ellipsis:n}=e;return{...n&&{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}),d=e=>{let{ellipsis:n,children:t,className:i,...a}=e;return(0,s.jsx)(r,{fontSize:18,component:"h3",fontWeight:700,ellipsis:+!!n,className:(0,l.A)({[i||""]:!0}),...a,children:t})},c=e=>{let{ellipsis:n,children:t,className:i,...a}=e;return(0,s.jsx)(r,{fontSize:15,component:"h5",lineHeight:1,fontWeight:500,ellipsis:+!!n,className:(0,l.A)({[i||""]:!0}),...a,children:t})},o=e=>{let{ellipsis:n,children:t,className:i,...a}=e;return(0,s.jsx)(r,{component:"p",fontSize:14,fontWeight:500,lineHeight:1.5,color:"text.secondary",ellipsis:+!!n,className:(0,l.A)({[i||""]:!0}),...a,children:t})}},60593:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var s=t(37876),i=t(65657),a=t(97444),l=t(34293),r=t(46520),d=t(70741),c=t(46229),o=t(72528),x=t(56882),u=t(53341),h=t(14232),j=t(17165),p=t(22477),g=t(15843),A=t(31440),m=t(57513);let f=e=>{let{open:n,record:t,name:f,onClose:v,initAmount:N,onSave:w,type:H="create"}=e,{writeContract:S}=(0,j.x)(),[b,k]=(0,h.useState)(!1),[C,E]=(0,h.useState)("");(0,h.useEffect)(()=>{N&&E(u.ck(N+""))},[N]),(0,h.useEffect)(()=>{},[n]);let T=()=>{0>Number(C)||(k(!0),S({abi:p.F1,address:p.NQ,functionName:"updatePrice",args:[p.$T,t.id,u.g5(C)]},{onSuccess:()=>{k(!1),w(u.g5(C))},onError:()=>{k(!1)}}))},_=()=>{0>Number(C)||(k(!0),S({abi:p.HV,address:p.$T,functionName:"approve",args:[p.NQ,t.id]},{onSuccess:()=>{S({abi:p.F1,address:p.NQ,functionName:"create",args:[p.$T,t.id,u.g5(C)]},{onSuccess:()=>{k(!1),w(u.g5(C))},onError:()=>{k(!1)}})},onError:()=>{k(!1)}}))};return(0,s.jsxs)(i.A,{open:n,onClose:v,sx:{"& .MuiDialog-paper":{width:"800px"}},children:[(0,s.jsx)(a.A,{id:"alert-dialog-title",children:"Quick list"}),(0,s.jsxs)(l.A,{sx:{maxHeight:"calc(100vh - 180px)"},children:[(0,s.jsxs)(g.A,{sx:{gap:2,mb:2},children:[(0,s.jsxs)(A.A,{sx:{alignItems:"center",gap:2},children:[(0,s.jsx)("img",{width:72,height:72,src:t.image,alt:""}),(0,s.jsxs)(r.A,{children:[(0,s.jsx)(m.H5,{children:t.name}),(0,s.jsx)(m.H5,{mt:1,children:f})]})]}),(0,s.jsxs)(r.A,{children:[(0,s.jsx)(m.H5,{sx:{textAlign:"right"},children:"Listing price"}),(0,s.jsxs)(m.H5,{mt:1,children:[C||"--"," ETH"]})]})]}),(0,s.jsx)(d.A,{fullWidth:!0,value:C,type:"number",onChange:e=>E(e.target.value),slotProps:{input:{endAdornment:(0,s.jsx)(c.A,{position:"end",children:"ETH"})}}})]}),(0,s.jsxs)(o.A,{children:[(0,s.jsx)(x.A,{variant:"outlined",onClick:v,children:"取消"}),(0,s.jsx)(x.A,{onClick:()=>{var e,n;null==(e=(n={create:_,update:T})[H])||e.call(n)},loading:b,variant:"contained",children:{create:"确定",update:"更新"}[H]||"确定"})]})]})}},63004:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/details",function(){return t(613)}])}},e=>{var n=n=>e(e.s=n);e.O(0,[4945,1390,7335,636,6593,8792],()=>n(63004)),_N_E=e.O()}]);