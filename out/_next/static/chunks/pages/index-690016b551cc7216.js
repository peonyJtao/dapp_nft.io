(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3332],{10555:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var s=n(37876),a=n(52460),i=n(46520),r=n(56882),l=n(89099),c=n(14232),o=n(8047),d=n(75569),u=n(22477),h=n(60593),x=n(57513);let p=e=>{var t,n;let{record:p,type:f="create"}=e,g=(0,l.useRouter)(),m=(0,o.F)(),j="create"===f?(0,d.Q)({abi:u.HV,address:u.$T,functionName:"ownerOf",args:[p.id]}):(0,d.Q)({abi:u.F1,address:u.NQ,functionName:"nftList",args:[u.$T,p.id]}),A=(0,d.Q)({abi:u.HV,address:u.$T,functionName:"name"}),[v,N]=(0,c.useState)(!1),b="create"===f?j.data:null==j||null==(t=j.data)?void 0:t[0];console.log(b,m.address,"xxxxx");let w="create"===f?null:null==j||null==(n=j.data)?void 0:n[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.A,{onClick:()=>{g.push("/details?id=".concat(p.id))},sx:{cursor:"pointer","& .MuiBox-root:hover":{"& img":{transform:"scale(1.12)"}}},children:[(0,s.jsx)(i.A,{sx:{width:"274px",height:"274px",overflow:"hidden","& img":{transition:"all 0.4s ease-in-out"}},children:(0,s.jsx)("img",{width:274,height:274,src:p.image,alt:""})}),(0,s.jsxs)(i.A,{sx:{padding:"30px 15px"},children:[(0,s.jsx)(x.H5,{children:p.name}),(0,s.jsx)(x.H5,{mt:1,children:A.data})]}),b&&b===m.address&&(0,s.jsx)(r.A,{onClick:e=>{e.stopPropagation(),N(!0)},children:"create"===f?"出售":"更新价格"})]}),(0,s.jsx)(h.A,{open:v,type:f,onClose:()=>N(!1),record:p,onSave:()=>N(!1),name:A.data,initAmount:w})]})}},16760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(48897)}])},31440:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(37876),a=n(46520);let i=e=>{let{sx:t,children:n,onClick:i}=e;return(0,s.jsx)(a.A,{display:"flex",sx:t,onClick:()=>null==i?void 0:i(),children:n})}},48897:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var s=n(37876),a=n(46520),i=n(65965),r=n(14232),l=n(75569),c=n(1081),o=n(61511),d=n(60044),u=n(629),h=n(22477),x=n(10555),p=n(31440);let f="https://ipfs.io/ipfs/",g=()=>{let[e,t]=(0,r.useState)(!0),[n,g]=(0,r.useState)([]),m=(0,l.Q)({abi:h.HV,address:h.$T,functionName:"totalSupply"}),j=(0,l.Q)({abi:h.HV,address:h.$T,functionName:"tokenURI",args:[0]}),[A,v]=(0,r.useState)("");(0,c.i)(),(0,o.U)(),(0,r.useEffect)(()=>{j.data&&m.data&&N()},[m.data,j.data]);let N=async()=>{t(!0);let e=j.data.lastIndexOf("/0"),n=j.data.slice(7,e);v(n);let s=[];for(let e=0;e<Number(m.data);e++){let t=await b(n+"/"+e,e);s.push(t)}g(s),t(!1)},b=async(e,t)=>await fetch("".concat(f).concat(e)).then(e=>e.json()).then(e=>({...e,id:t,image:"".concat(f).concat(e.image.slice(7))}));(0,r.useEffect)(()=>{console.log(n)},[n]);let w=async e=>{let t=await b(A+"/"+e,e);g(e=>e.concat(t))},H=e=>{g(t=>t.filter(t=>t.id!==e))};return!function(e={}){let{enabled:t=!0,onLogs:n,config:s,...a}=e,i=(0,o.U)(e),l=(0,c.i)({config:i}),h=e.chainId??l;(0,r.useEffect)(()=>{if(t&&n)return function(e,t){let n,s,{syncConnectedChain:a=e._internal.syncConnectedChain,...i}=t,r=t=>{n&&n();let s=e.getClient({chainId:t});return n=(0,u.T)(s,d.q,"watchContractEvent")(i)},l=r(t.chainId);return a&&!t.chainId&&(s=e.subscribe(({chainId:e})=>e,async e=>r(e))),()=>{l?.(),s?.()}}(i,{...a,chainId:h,onLogs:n})},[h,i,t,n,a.abi,a.address,a.args,a.batch,a.eventName,a.fromBlock,a.onError,a.poll,a.pollingInterval,a.strict,a.syncConnectedChain])}({address:h.$T,abi:h.HV,eventName:"Transfer",onLogs(e){let t=e[0].args,n=Number(t.tokenId);"0x0000000000000000000000000000000000000000"===t.from?w(n):"0x0000000000000000000000000000000000000000"===t.to&&H(n)}}),(0,s.jsx)(a.A,{mt:2,children:e?(0,s.jsx)(a.A,{sx:{margin:"150px 0",display:"flex",justifyContent:"center"},children:(0,s.jsx)(i.A,{size:40,color:"inherit"})}):(0,s.jsx)(p.A,{sx:{flexWrap:"wrap",justifyContent:"start",gap:2},children:n.map((e,t)=>(0,s.jsx)(x.A,{record:e},t))})})}},57513:(e,t,n)=>{"use strict";n.d(t,{H3:()=>c,H5:()=>o,lX:()=>d});var s=n(37876),a=n(31599),i=n(46520),r=n(69241);let l=(0,a.Ay)(i.A)(e=>{let{ellipsis:t}=e;return{...t&&{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}),c=e=>{let{ellipsis:t,children:n,className:a,...i}=e;return(0,s.jsx)(l,{fontSize:18,component:"h3",fontWeight:700,ellipsis:+!!t,className:(0,r.A)({[a||""]:!0}),...i,children:n})},o=e=>{let{ellipsis:t,children:n,className:a,...i}=e;return(0,s.jsx)(l,{fontSize:15,component:"h5",lineHeight:1,fontWeight:500,ellipsis:+!!t,className:(0,r.A)({[a||""]:!0}),...i,children:n})},d=e=>{let{ellipsis:t,children:n,className:a,...i}=e;return(0,s.jsx)(l,{component:"p",fontSize:14,fontWeight:500,lineHeight:1.5,color:"text.secondary",ellipsis:+!!t,className:(0,r.A)({[a||""]:!0}),...i,children:n})}},60593:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var s=n(37876),a=n(65657),i=n(97444),r=n(34293),l=n(46520),c=n(70741),o=n(46229),d=n(72528),u=n(56882),h=n(53341),x=n(14232),p=n(17165),f=n(22477),g=n(15843),m=n(31440),j=n(57513);let A=e=>{let{open:t,record:n,name:A,onClose:v,initAmount:N,onSave:b,type:w="create"}=e,{writeContract:H}=(0,p.x)(),[C,E]=(0,x.useState)(!1),[y,S]=(0,x.useState)("");(0,x.useEffect)(()=>{N&&S(h.ck(N+""))},[N]),(0,x.useEffect)(()=>{},[t]);let T=()=>{0>Number(y)||(E(!0),H({abi:f.F1,address:f.NQ,functionName:"updatePrice",args:[f.$T,n.id,h.g5(y)]},{onSuccess:()=>{E(!1),b(h.g5(y))},onError:()=>{E(!1)}}))},k=()=>{0>Number(y)||(E(!0),H({abi:f.HV,address:f.$T,functionName:"approve",args:[f.NQ,n.id]},{onSuccess:()=>{H({abi:f.F1,address:f.NQ,functionName:"create",args:[f.$T,n.id,h.g5(y)]},{onSuccess:()=>{E(!1),b(h.g5(y))},onError:()=>{E(!1)}})},onError:()=>{E(!1)}}))};return(0,s.jsxs)(a.A,{open:t,onClose:v,sx:{"& .MuiDialog-paper":{width:"800px"}},children:[(0,s.jsx)(i.A,{id:"alert-dialog-title",children:"Quick list"}),(0,s.jsxs)(r.A,{sx:{maxHeight:"calc(100vh - 180px)"},children:[(0,s.jsxs)(g.A,{sx:{gap:2,mb:2},children:[(0,s.jsxs)(m.A,{sx:{alignItems:"center",gap:2},children:[(0,s.jsx)("img",{width:72,height:72,src:n.image,alt:""}),(0,s.jsxs)(l.A,{children:[(0,s.jsx)(j.H5,{children:n.name}),(0,s.jsx)(j.H5,{mt:1,children:A})]})]}),(0,s.jsxs)(l.A,{children:[(0,s.jsx)(j.H5,{sx:{textAlign:"right"},children:"Listing price"}),(0,s.jsxs)(j.H5,{mt:1,children:[y||"--"," ETH"]})]})]}),(0,s.jsx)(c.A,{fullWidth:!0,value:y,type:"number",onChange:e=>S(e.target.value),slotProps:{input:{endAdornment:(0,s.jsx)(o.A,{position:"end",children:"ETH"})}}})]}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(u.A,{variant:"outlined",onClick:v,children:"取消"}),(0,s.jsx)(u.A,{onClick:()=>{var e,t;null==(e=(t={create:k,update:T})[w])||e.call(t)},loading:C,variant:"contained",children:{create:"确定",update:"更新"}[w]||"确定"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4945,1390,636,6593,8792],()=>t(16760)),_N_E=e.O()}]);